<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <!--<script src="http://code.jquery.com/jquery-1.11.0.min.js"/>-->

    <!--<script src="../data/my_restraunt_list.js"></script>-->
    <!--<script src="../data/friends_restraunt_list.js"></script>-->
    <title>manage restraunt</title>
</head>
<body>
<form class="form-inline">
    <div class="form-group" style="width: 100%;display: inline-flex;">
        <input type="text" class="form-control" style="width:100%" id="exampleInputName2" placeholder="추가할 식당명을 입력하세요">
        <button type="submit" class="btn btn-default">추가</button>
    </div>

</form>
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">목록</h3>
    </div>
    <table class="table table-striped" id="my_table">
        <thead>
        <tr>
            <th>번호</th>
            <th>식당</th>
            <th></th>
        </tr>
        </thead>
        <tbody id="my_list"></tbody>
    </table>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">친구 추천 식당</h3>
    </div>
    <div class="panel-body">
        <table class="table table-striped" id="friends_table">
            <thead>
            <tr>
                <th>번호</th>
                <th>친구</th>
                <th>추천 식당</th>
                <th></th>
                <th></th>
            </tr>
            </thead>
            <tbody id="friends_list"></tbody>
        </table>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<!-- 모든 컴파일된 플러그인을 포함합니다 (아래), 원하지 않는다면 필요한 각각의 파일을 포함하세요 -->
<script src="../js/bootstrap.min.js"></script>
<script type="text/javascript">
    var $parentEl = $('#my_list');
    var $friendsEl = $('#friends_list');
//    $.each(my, function(i, v){
//        $('<tr><th scope="row">'+ (i+1) +'</th><td>'+ v.name +'</td><td>'+ v.name+'</td><td><button type="button" class="btn btn-default btn-sm _info" data="'+v.name+'">정보</button></td></tr>').appendTo($parentEl);
//    });
//
//    $.each(friends, function(i, v){
//        $('<tr><th scope="row">'+ (i+1) +'</th><td>'+ v.name +'</td><td>'+ v.list[0].name+'</td><td><button type="button" class="btn btn-default btn-sm _info" data="'+v.name+'">정보</button></td><td><button type="button" class="btn btn-default btn-sm">추가</button></td></tr>').appendTo($friendsEl);
//    });

    $('#my_table').on('click','tr',function(e){
        $('table').find('tr.success').removeClass('success');
        $(this).addClass('success');
    });
    $('#friends_table').on('click','tr',function(e){
        $('table').find('tr.success').removeClass('success');
        $(this).addClass('success');
    });

    $('._info').on('click', function(){
        var url = 'http://openapi.naver.com/search?key=c1b406b32dbbbbeee5f2a36ddc14067f&target=blog&query=';
        var searchVal = this.attributes['data'].value;



        $.getJSON(url + encodeURIComponent(searchVal), function(data){
            $('div.modal').modal();
            $('.modal .modal-title').text('식당정보');


        });
    });

    var url = 'http://localhost:8000';
    $.getJSON( url + "/restraunts", function( data ) {
        var $parentEl = $('#my_list');
        $.each(data, function(i, v){
            $('<tr><th scope="row">'+ (i+1) +'</th><td>'+ v.name +'</td><td>'+ v.name+'</td><td><button type="button" class="btn btn-default btn-sm _info" data="'+v.name+'">정보</button></td></tr>').appendTo($parentEl);
        });
    });

    $.getJSON( url + "/friends", function( data ) {
        var $parentEl = $('#my_list');
        $.each(data, function(i, v){
            $('<tr><th scope="row">'+ (i+1) +'</th><td>'+ v.name +'</td><td>'+ v.list[0].name+'</td><td><button type="button" class="btn btn-default btn-sm _info" data="'+v.name+'">정보</button></td><td><button type="button" class="btn btn-default btn-sm">추가</button></td></tr>').appendTo($friendsEl);
        });
    });

</script>

<div class="modal fade" id="layerpop" >
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- header -->
            <div class="modal-header">
                <!-- 닫기(x) 버튼 -->
                <button type="button" class="close" data-dismiss="modal">×</button>
                <!-- header title -->
                <h4 class="modal-title">Header</h4>
            </div>
            <!-- body -->
            <div class="modal-body">
                <p>
                    식당이름
                    블로그 리뷰 수
                    링크
                    전화번호
                    추천한 친구들

                </p>
            </div>
            <!-- Footer -->
            <div class="modal-footer">
                Footer
                <button type="button" class="btn btn-default" data-dismiss="modal">닫기</button>
            </div>
        </div>
    </div>
</div>
</body>


</html>